{"version":3,"sources":["../../app-es6/views/CorridaView.js"],"names":["View","DateHelper","corridaCurrentInstance","CorridaView","elemento","addEventListener","event","target","nodeName","ordena","textContent","toLowerCase","model","voltas","max","piloto","nome","tempo","corridas","reduce","prev","current","Number","velocidadeMedia","replace","map","n","horaLargada","numero","codigo","hora","join"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,gB,UAAAA,I;;AACAC,sB,sBAAAA,U;;AACAC,kC,iCAAAA,sB;;;;;;;;;;;;;;;;;;;;;mCAEKC,W;;;AAET,qCAAYC,QAAZ,EAAsB;AAAA;;AAAA,0IAEZA,QAFY;;AAIlBA,6BAASC,gBAAT,CAA0B,OAA1B,EAAmC,UAASC,KAAT,EAAgB;;AAE/C,4BAAGA,MAAMC,MAAN,CAAaC,QAAb,IAAyB,IAA5B,EACIN,yBAAyBO,MAAzB,CAAgCH,MAAMC,MAAN,CAAaG,WAAb,CAAyBC,WAAzB,EAAhC;AACP,qBAJD;AAJkB;AASrB;;;;6CAEQC,K,EAAO;AACZ,4BAAIC,SAAS,EAAb;AAAA,4BAAiBC,MAAK,EAACC,QAAO,EAACC,MAAK,EAAN,EAAR,EAAmBC,OAAM,EAAzB,EAAtB;;AAEA,4BAAIL,MAAMM,QAAN,CAAe,CAAf,CAAJ,EAAsB;AAClBL,qCAASD,MAAMM,QAAN,CAAe,CAAf,EAAkBL,MAA3B;;AAEAC,kCAAMD,OAAOM,MAAP,CAAc,UAASC,IAAT,EAAeC,OAAf,EAAwB;AACxC,uCAAQC,OAAOF,KAAKG,eAAL,CAAqBC,OAArB,CAA6B,GAA7B,EAAkC,GAAlC,CAAP,IAAiDF,OAAOD,QAAQE,eAAR,CAAwBC,OAAxB,CAAgC,GAAhC,EAAqC,GAArC,CAAP,CAAjD,GAAqGJ,IAArG,GAA4GC,OAApH;AACH,6BAFK,CAAN;AAGH;;AAED,qHAGUT,MAAMM,QAAN,CAAeO,GAAf,CAAmB;AAAA,8DACfC,EAAEC,WADa;AAAA,yBAAnB,CAHV,4ZAuBUd,OAAOY,GAAP,CAAW;AAAA,gGAECC,EAAEE,MAFH,4CAGCF,EAAEX,MAAF,CAASc,MAAT,GAAkB,KAAlB,GAA0BH,EAAEX,MAAF,CAASC,IAHpC,4CAICU,EAAEI,IAJH,2CAKCJ,EAAET,KALH,2CAMCS,EAAEH,eANH;AAAA,yBAAX,EASCQ,IATD,CASM,EATN,CAvBV,uJAsCoDjB,IAAIC,MAAJ,CAAWC,IAtC/D,kCAsCgGF,IAAIG,KAtCpG;AAsDH;;;;cA9E4BjB,I","file":"CorridaView.js","sourcesContent":["import {View} from './View';\nimport {DateHelper} from '../helpers/DateHelper';\nimport {corridaCurrentInstance} from '../controllers/CorridaController';\n\nexport class CorridaView extends View {\n\n    constructor(elemento) {\n\n        super(elemento);\n\n        elemento.addEventListener('click', function(event) {\n\n            if(event.target.nodeName == 'TH')\n                corridaCurrentInstance().ordena(event.target.textContent.toLowerCase());    \n        });\n    }\n\n    template(model) {\n        let voltas = [], max= {piloto:{nome:''}, tempo:''};\n        \n        if (model.corridas[0]){\n            voltas = model.corridas[0].voltas;\n\n            max = voltas.reduce(function(prev, current) {\n                return (Number(prev.velocidadeMedia.replace(',', '.')) > Number(current.velocidadeMedia.replace(',', '.')) ? prev : current)\n            });\n        }\n\n        return `\n         <div class=\"person\">\n            <h2>Hora Largada: \n                ${model.corridas.map(n => `\n                    ${n.horaLargada}\n                `)} \n            </h2>\n        </div>\n\n        <table class=\"table table-hover table-bordered\">\n\n            <thead>\n                <tr>\n                    <th>VOL</th>\n                    <th>PILOTO</th>\n                    <th>HORA</th>\n                    <th>TEMPO</th>\n                    <th>VM</th>\n                </tr>\n            </thead>\n\n            <tbody>\n\n                ${voltas.map(n => `\n                    <tr>\n                        <td>${n.numero}</td>\n                        <td>${n.piloto.codigo + ' - ' + n.piloto.nome}</td>\n                        <td>${n.hora}</td>\n                        <td>${n.tempo}</td>\n                        <td>${n.velocidadeMedia}</td>\n                    </tr>\n                    \n                `).join('')\n\t\t\t\t}                \n            </tbody>\n\n            <tfoot>\n                <tr>\n                    <td colspan=\"5\">MELHOR VOLTA CORRIDA: ${max.piloto.nome} &nbsp;&nbsp;&nbsp; TMV = ${max.tempo}</td>\n                </tr>\n\n                <tr>\n                    <td colspan=\"5\">LEGENDA:<br>\n                        <table width=\"100%\">\n                            <tr><td>VOL = Nº DA VOLTA</td><td>MV = Nº DA MELHOR VOLTA</td></tr>\n                            <tr><td>TMV = TEMPO DA MELHOR VOLTA</td><td>DL = DIFERENÇA PARA O LÍDER</td></tr>\n                            <tr><td>VM (Km/h) = VELOCIDADE MÉDIA</td><td>TAV = TEMPO APÓS O VENCEDOR</td></tr>\n                        </table>\n                    </td>\n                </tr>\n            </tfoot>\n\n        </table>\n        `;\n    }\n}\n/*\nDescobrir a melhor volta de cada piloto\nDescobrir a melhor volta da corrida\nCalcular a velocidade média de cada piloto durante toda corrida\nDescobrir quanto tempo cada piloto chegou após o vencedor\n\n\nLEGENDA:\nPOS = POSIÇÃO\n# = Nº COMPETIDOR\nMV = Nº DA MELHOR VOLTA\nTMV = TEMPO DA MELHOR VOLTA\nTT = TEMPO TOTAL\nDL = DIFERENÇA PARA O LÍDER\nDA = DIFERENÇA PARA O ANTERIOR\nTUV = TEMPO DA ÚLTIMA VOLTA\nTV = TOTAL DE VOLTAS\nVM (Km/h) = VELOCIDADE MÉDIA\nUF = UNIDADE FEDERATIVA\n\nPENALIZAÇÕES:\nOBSERVAÇÕES DA PROVA\n*/"]}