{"version":3,"sources":["../../app-es6/controllers/TomadaDeTempoController.js"],"names":["tomadaDeTempoCurrentInstance","tomadaDeTempoController","ListaTomadaDeTempos","Mensagem","TomadaDeTemposView","MensagemView","TomadaDeTempoService","Bind","TomadaDeTempo","PilotoController","ListaPilotos","VoltaHelper","TomadaDeTempoController","_listaPilotos","_pilotoController","$","document","querySelector","bind","_botaoIniciarTomadaDeTempo","tempo","_listaTomadaDeTempos","_mensagem","_service","_ordemAtual","_init","listaPilotos","coluna","inverteOrdem","ordena","p","s","parentNode","style","visibility","forEach","call","querySelectorAll","el","classList","remove","pilotos","adiciona","piloto","nome","geraVolta"],"mappings":";;;;;;;;;;;;;AAgEO,aAASA,4BAAT,GAAwC;;AAE3C,eAAOC,uBAAP;AAEH;;4CAJeD,4B;;;;AAhERE,+B,8BAAAA,mB;;AACAC,oB,mBAAAA,Q;;AACAC,8B,4BAAAA,kB;;AACAC,wB,sBAAAA,Y;;AACAC,gC,iCAAAA,oB;;AACAC,gB,gBAAAA,I;;AACAC,yB,wBAAAA,a;;AACAC,4B,gCAAAA,gB;;AACAC,wB,uBAAAA,Y;;AACAC,uB,uBAAAA,W;;;;;;;;;;;;;;;;;;;;;AAEFC,mC;AACF,mDAAc;AAAA;;AACV,yBAAKC,aAAL,GAAqB,IAAIH,YAAJ,EAArB;AACA,yBAAKI,iBAAL,GAAyB,IAAIL,gBAAJ,EAAzB;;AAEA,wBAAIM,IAAIC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAR;;AAEA,yBAAKG,0BAAL,GAAkCJ,EAAE,uBAAF,CAAlC;;AAEC,wBAAIK,QAAQ,IAAIjB,QAAJ,EAAZ;;AAED,yBAAKkB,oBAAL,GAA4B,IAAId,IAAJ,CACxB,IAAIL,mBAAJ,EADwB,EAExB,IAAIE,kBAAJ,CAAuBW,EAAE,oBAAF,CAAvB,CAFwB,EAGxB,UAHwB,EAGZ,SAHY,EAGA,QAHA,EAGU,cAHV,CAA5B;;AAKA,yBAAKO,SAAL,GAAiB,IAAIf,IAAJ,CACb,IAAIJ,QAAJ,EADa,EACG,IAAIE,YAAJ,CAAiBU,EAAE,eAAF,CAAjB,CADH,EACyC,OADzC,CAAjB;;AAGA,yBAAKQ,QAAL,GAAgB,IAAIjB,oBAAJ,EAAhB;;AAEA,yBAAKkB,WAAL,GAAmB,EAAnB;;AAEA,yBAAKC,KAAL;AACH;;;;4CAEO;AACJ,6BAAKZ,aAAL,GAAqB,KAAKC,iBAAL,CAAuBY,YAAvB,EAArB;AACH;;;2CAEMC,M,EAAQ;AACX,4BAAG,KAAKH,WAAL,IAAoBG,MAAvB,EAA+B;AAC3B,iCAAKN,oBAAL,CAA0BO,YAA1B;AACH,yBAFD,MAEO;AACH,iCAAKP,oBAAL,CAA0BQ,MAA1B,CAAiC,UAACC,CAAD,EAAIC,CAAJ;AAAA,uCAAUD,EAAEH,MAAF,IAAYI,EAAEJ,MAAF,CAAtB;AAAA,6BAAjC;AACH;;AAED,6BAAKH,WAAL,GAAmBG,MAAnB;AACH;;;wDAEmB;AAAA;;AAChB,6BAAKR,0BAAL,CAAgCa,UAAhC,CAA2CC,KAA3C,CAAiDC,UAAjD,GAA8D,QAA9D;;AAEA,2BAAGC,OAAH,CAAWC,IAAX,CAAgBpB,SAASqB,gBAAT,CAA0B,gBAA1B,CAAhB,EAA6D,UAAUC,EAAV,EAAc;AACvEA,+BAAGC,SAAH,CAAaC,MAAb,CAAoB,QAApB;AACH,yBAFD;;AAIA,6BAAK3B,aAAL,CAAmB4B,OAAnB,CAA2BN,OAA3B,CAAmC;AAAA,mCAAU,MAAKd,oBAAL,CAA0BqB,QAA1B,CAAmC,IAAIlC,aAAJ,CAAkB,GAAlB,EAAuBmC,OAAOC,IAA9B,EAAoCjC,YAAYkC,SAAZ,EAApC,CAAnC,CAAV;AAAA,yBAAnC;AACH;;;;;;AAGD5C,mC,GAA0B,IAAIW,uBAAJ,E","file":"TomadaDeTempoController.js","sourcesContent":["import {ListaTomadaDeTempos}  from '../models/ListaTomadaDeTempos';\r\nimport {Mensagem}             from '../models/Mensagem';\r\nimport {TomadaDeTemposView}   from '../views/TomadaDeTemposView';\r\nimport {MensagemView}         from '../views/MensagemView';\r\nimport {TomadaDeTempoService} from '../services/TomadaDeTempoService';\r\nimport {Bind}                 from '../helpers/Bind';\r\nimport {TomadaDeTempo}        from '../models/TomadaDeTempo';\r\nimport {PilotoController}     from '../controllers/PilotoController';\r\nimport {ListaPilotos}         from '../models/ListaPilotos';\r\nimport {VoltaHelper}          from '../helpers/VoltaHelper';\r\n\r\nclass TomadaDeTempoController {\r\n    constructor() {\r\n        this._listaPilotos = new ListaPilotos();\r\n        this._pilotoController = new PilotoController();\r\n        \r\n        let $ = document.querySelector.bind(document);\r\n        \r\n        this._botaoIniciarTomadaDeTempo = $('#iniciarTomadaDeTempo');\r\n\r\n         let tempo = new Mensagem();\r\n\r\n        this._listaTomadaDeTempos = new Bind(\r\n            new ListaTomadaDeTempos(), \r\n            new TomadaDeTemposView($('#tomadaDeTempoView')), \r\n            'adiciona', 'esvazia' , 'ordena', 'inverteOrdem');\r\n       \r\n        this._mensagem = new Bind(\r\n            new Mensagem(), new MensagemView($('#mensagemView')), 'texto');    \r\n            \r\n        this._service = new TomadaDeTempoService();\r\n\r\n        this._ordemAtual = '';\r\n\r\n        this._init();\r\n    }\r\n\r\n    _init() {\r\n        this._listaPilotos = this._pilotoController.listaPilotos();\r\n    }\r\n\r\n    ordena(coluna) {\r\n        if(this._ordemAtual == coluna) {\r\n            this._listaTomadaDeTempos.inverteOrdem(); \r\n        } else {\r\n            this._listaTomadaDeTempos.ordena((p, s) => p[coluna] - s[coluna]);    \r\n        }\r\n        \r\n        this._ordemAtual = coluna;    \r\n    }    \r\n\r\n    criaTomadaDeTempo() {\r\n        this._botaoIniciarTomadaDeTempo.parentNode.style.visibility = 'hidden';\r\n\r\n        [].forEach.call(document.querySelectorAll('div.row.hidden'), function (el) {\r\n            el.classList.remove(\"hidden\");\r\n        }); \r\n\r\n        this._listaPilotos.pilotos.forEach(piloto => this._listaTomadaDeTempos.adiciona(new TomadaDeTempo('1', piloto.nome, VoltaHelper.geraVolta())));\r\n    }\r\n}\r\n\r\nlet tomadaDeTempoController = new TomadaDeTempoController();\r\n\r\nexport function tomadaDeTempoCurrentInstance() {\r\n\r\n    return tomadaDeTempoController;\r\n\r\n}    \r\n"]}